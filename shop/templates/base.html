{% load static %}

<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>
            {% block title %}
                Encantos Mei
            {% endblock %}
        </title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <link rel="icon" href="{% static 'images/icon.svg' %}" type="image/svg+xml">
    </head>

    <body>
        <nav class="navbar navbar-expand-lg custom-navbar" role="navigation">
    <div class="container-fluid">
        <a class="navbar-brand {% if request.path == '/shop/' or request.path == '/index/' %}active{% endif %}" href="{% url 'index' %}">
            <img src="{% static 'images/logo.svg' %}" alt="Logo de Encantos Mei" class="d-inline-block align-text-top" width="30" height="30"> 
            Inicio | Encantos Mei
        </a>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/shop/products/' %}active{% endif %}" href="{% url 'products' %}">Productos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/shop/services/' %}active{% endif %}" href="{% url 'services' %}">Servicios</a>
                </li>

                        {% if user.is_authenticated %}

                        {% if is_admin %}
                        <li class="nav-item">
                            <a class="nav-link {% if request.path == '/shop/clients/' %}active{% endif %}" href="{% url 'clients' %}">Clientes</a>
                        </li>
                    {% endif %}

                            <li class="nav-item">
                                <span class="navbar-text d-flex align-items-center" style="white-space: nowrap;">
                                    {% if profile and profile.profile_picture %}
                                        <img src="{{ profile.profile_picture.url }}" alt="Imagen de perfil" width="30" height="30" class="rounded-circle me-2" style="margin-right: 5px;">
                                    {% endif %}{{ user.username }}
                                </span>
                            </li>
                    
                            <li class="nav-item">
                                <a class="nav-link {% if request.path == '/shop/profile/' %}active{% endif %}" href="{% url 'profile' %}">
                                    Mi perfil
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link {% if request.path == '/messages/messages/' %}active{% endif %}" href="{% url 'messages' %}">
                                    Mensajes
                                    
                                    {% if notification_count %}
                                        <span class="badge bg-danger">
                                            {{ notification_count }}
                                        </span>
                                    {% endif %}
                                    
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link {% if request.path == '/shop/logout/' %}active{% endif %}" href="{% url 'logout' %}">
                                    Cerrar Sesión
                                </a>
                            </li>
                        {% else %}
                            <li class="nav-item">
                                <a class="nav-link {% if request.path == '/shop/login/' %}active{% endif %}" href="{% url 'login' %}">
                                    Iniciar Sesión
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link {% if request.path == '/shop/register/' %}active{% endif %}" href="{% url 'register' %}">
                                    Registrar
                                </a>
                            </li>

                        {% endif %}

                    </ul>
                    
                    <div style="display: flex; justify-content: center; align-items: center; margin: 20px auto; max-width: 400px; height: 80px;">
                        <form class="form-search" method="GET" action="{% url 'search_products' %}" role="search" style="display: flex; width: 100%; align-items: center;">
                            <input  type="search" name="query" placeholder="Buscar productos" aria-label="Search" style="flex: 1; margin-right: 10px; border: 1px solid #ddd; border-radius: 5px; padding: 10px;">
                            <button class="btn btn-outline-light" type="submit" style="border: 1px solid #ddd; border-radius: 5px; padding: 10px 20px;">
                                Buscar
                            </button>
                        </form>
                    </div>
                
                </div>
            </div>
        </nav>

        <div class="content">
            {% block content %}
            {% endblock %}
        </div>

        <footer class="bg-light text-center text-lg-start mt-auto">
            <div class="container p-2">
                <div class="row justify-content-between align-items-center">
                    <div class="col-auto">
                        <h5 style="display: inline;">Encantos Mei | © 2024 Todos los derechos reservados</p>
                    </div>
                    <div class="col-auto">
                        <ul class="list-unstyled d-flex" style="font-size: 0.8rem; padding: 0; margin: 0;">
                            <li class="me-3"><a href="{% url 'contact' %}" class="text-dark text-decoration-none hover-link">Contacto</a></li>
                            <li class="me-3"><a href="{% url 'about' %}" class="text-dark text-decoration-none hover-link">Acerca de</a></li>
                            <li><a href="{% url 'pages' %}" class="text-dark text-decoration-none hover-link">Mapa del sitio</a></li>
                        </ul>
                    </div>
                    <div class="col-auto">
                        <h5 style="display: inline;">Síguenos |</h5>
                        <a href="#" class="me-2 text-dark hover-link" style="display: inline;"><i class="bi bi-facebook" style="font-size: 1.2rem;"></i></a>
                        <a href="#" class="text-dark hover-link" style="display: inline;"><i class="bi bi-instagram" style="font-size: 1.2rem;"></i></a>
                    </div>
                </div>
            </div>
        </footer>
        

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha384-KyZXEAg3QhqLMpG8r+Knujsl5/12h0a5y/jH5LOJ3Z7t85o0L09y/jR+3Z1E6Q6Z" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    </body>
</html>
